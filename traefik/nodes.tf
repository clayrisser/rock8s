module "nodes" {
  source              = "./modules/proxmox_vm"
  node_count          = var.vm_count
  proxmox_node        = var.proxmox_node
  ssh_public_keys_b64 = var.ssh_public_keys_b64
  vm_clone            = var.vm_clone
  vm_cpu_type         = var.vm_cpu_type
  vm_max_vcpus        = var.vm_max_vcpus
  vm_memory_mb        = var.vm_memory
  vm_name_prefix      = "vm-traefik"
  vm_net_name         = var.vm_net_name
  vm_net_subnet_cidr  = var.vm_net_subnet_cidr
  vm_os_disk_size_gb  = var.vm_disk_size
  vm_os_disk_storage  = var.vm_os_disk_storage
  vm_sockets          = var.vm_sockets
  vm_tags             = "terraform;traefik"
  vm_user             = var.vm_user
  vm_vcpus            = var.vm_vcpus
}
